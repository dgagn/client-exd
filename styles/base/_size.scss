@use "sass:map";
@use "breakpoint-suffix" as *;
@use "breakpoints";

$unit: 1rem;

$sizes: (
    4xs: 0.25rem,
    3xs: 0.5rem,
    2xs: 0.75rem,
    xs: 1rem,
    sm: 1.5rem,
    md: 2rem,
    lg: 3rem,
    xl: 4rem,
    2xl: 6rem,
    3xl: 8rem,
    4xl: 16rem
);

$other: (
    '0': 0,
    '10\\%': 10%,
    '20\\%': 20%,
    '25\\%': 25%,
    '30\\%': 30%,
    '33\\%': calc(100% / 3),
    '40\\%': 40%,
    '50\\%': 50%,
    '60\\%': 60%,
    '66\\%': calc(100% / 1.5),
    '70\\%': 70%,
    '75\\%': 75%,
    '80\\%': 80%,
    '90\\%': 90%,
    '100\\%': 100%,
    '100vw': 100vw,
    '100vh': 100vh,
    'auto': auto
);

:root {
    --size-unit: #{$unit};

    @each $size, $value in $sizes {
        --size-#{$size}: calc(#{$value} * var(--size-unit, #{$unit}));
    }
}

@function get($size) {
    @return var(--size-#{$size}, map.get($map: $sizes, $key: $size));
}

@mixin generate-sizes($breakpoint: '') {
    $breakpoint-suffix: breakpoint-suffix($breakpoint);

    @each $name, $value in $other {
        .width-#{$name} {
            width: $value;
        }
        .height-#{$name} {
            height: $value;
        }
    }

    @each $size, $value in $sizes {
        .width-#{$size} {
            width: get($size);
        }
        .height-#{$size} {
            height: get($size);
        }
    }
}

@include generate-sizes();

@each $breakpoint, $value in breakpoints.$breakpoints {
    @include breakpoints.get($breakpoint) {
        @include generate-sizes($breakpoint);
    }
}
