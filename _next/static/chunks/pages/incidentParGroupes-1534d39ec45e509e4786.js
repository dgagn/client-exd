(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[892],{4184:function(e,t){var r;!function(){"use strict";var n={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var i=typeof r;if("string"===i||"number"===i)e.push(r);else if(Array.isArray(r)){if(r.length){var l=a.apply(null,r);l&&e.push(l)}}else if("object"===i)if(r.toString===Object.prototype.toString)for(var o in r)n.call(r,o)&&r[o]&&e.push(o);else e.push(r.toString())}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r)}()},8021:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(8767),a=r(3260);function i(){return(0,n.useQuery)("database",a.database,{staleTime:3e4,refetchOnMount:!1}).data||[]}},2167:function(e,t,r){"use strict";var n=r(3848),a=r(9448);t.default=void 0;var i=a(r(7294)),l=r(9414),o=r(4651),u=r(7426),s={};function c(e,t,r,n){if(e&&(0,l.isLocalURL)(t)){e.prefetch(t,r,n).catch((function(e){0}));var a=n&&"undefined"!==typeof n.locale?n.locale:e&&e.locale;s[t+"%"+r+(a?"%"+a:"")]=!0}}var f=function(e){var t,r=!1!==e.prefetch,a=(0,o.useRouter)(),f=i.default.useMemo((function(){var t=(0,l.resolveHref)(a,e.href,!0),r=n(t,2),i=r[0],o=r[1];return{href:i,as:e.as?(0,l.resolveHref)(a,e.as):o||i}}),[a,e.href,e.as]),d=f.href,p=f.as,h=e.children,b=e.replace,v=e.shallow,m=e.scroll,g=e.locale;"string"===typeof h&&(h=i.default.createElement("a",null,h));var y=(t=i.Children.only(h))&&"object"===typeof t&&t.ref,x=(0,u.useIntersection)({rootMargin:"200px"}),j=n(x,2),w=j[0],D=j[1],O=i.default.useCallback((function(e){w(e),y&&("function"===typeof y?y(e):"object"===typeof y&&(y.current=e))}),[y,w]);(0,i.useEffect)((function(){var e=D&&r&&(0,l.isLocalURL)(d),t="undefined"!==typeof g?g:a&&a.locale,n=s[d+"%"+p+(t?"%"+t:"")];e&&!n&&c(a,d,p,{locale:t})}),[p,d,D,g,r,a]);var _={ref:O,onClick:function(e){t.props&&"function"===typeof t.props.onClick&&t.props.onClick(e),e.defaultPrevented||function(e,t,r,n,a,i,o,u){("A"!==e.currentTarget.nodeName||!function(e){var t=e.currentTarget.target;return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)&&(0,l.isLocalURL)(r))&&(e.preventDefault(),null==o&&n.indexOf("#")>=0&&(o=!1),t[a?"replace":"push"](r,n,{shallow:i,locale:u,scroll:o}))}(e,a,d,p,b,v,m,g)},onMouseEnter:function(e){(0,l.isLocalURL)(d)&&(t.props&&"function"===typeof t.props.onMouseEnter&&t.props.onMouseEnter(e),c(a,d,p,{priority:!0}))}};if(e.passHref||"a"===t.type&&!("href"in t.props)){var B="undefined"!==typeof g?g:a&&a.locale,E=a&&a.isLocaleDomain&&(0,l.getDomainLocale)(p,B,a&&a.locales,a&&a.domainLocales);_.href=E||(0,l.addBasePath)((0,l.addLocale)(p,B,a&&a.defaultLocale))}return i.default.cloneElement(t,_)};t.default=f},7426:function(e,t,r){"use strict";var n=r(3848);t.__esModule=!0,t.useIntersection=function(e){var t=e.rootMargin,r=e.disabled||!l,u=(0,a.useRef)(),s=(0,a.useState)(!1),c=n(s,2),f=c[0],d=c[1],p=(0,a.useCallback)((function(e){u.current&&(u.current(),u.current=void 0),r||f||e&&e.tagName&&(u.current=function(e,t,r){var n=function(e){var t=e.rootMargin||"",r=o.get(t);if(r)return r;var n=new Map,a=new IntersectionObserver((function(e){e.forEach((function(e){var t=n.get(e.target),r=e.isIntersecting||e.intersectionRatio>0;t&&r&&t(r)}))}),e);return o.set(t,r={id:t,observer:a,elements:n}),r}(r),a=n.id,i=n.observer,l=n.elements;return l.set(e,t),i.observe(e),function(){l.delete(e),i.unobserve(e),0===l.size&&(i.disconnect(),o.delete(a))}}(e,(function(e){return e&&d(e)}),{rootMargin:t}))}),[r,t,f]);return(0,a.useEffect)((function(){if(!l&&!f){var e=(0,i.requestIdleCallback)((function(){return d(!0)}));return function(){return(0,i.cancelIdleCallback)(e)}}}),[f]),[p,f]};var a=r(7294),i=r(3447),l="undefined"!==typeof IntersectionObserver;var o=new Map},5981:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSG:function(){return f},default:function(){return d}});var n=r(5893),a=(r(7294),r(8021)),i=r(6486),l=r(4184),o=r.n(l),u=r(8093),s=r(1664);function c(e){var t=e.className,r=e.groupObj,a=(0,u.Z)((function(e){return e.setFilterSearch}));return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("table",{className:o()("table",t),children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{className:"table__heading-group",children:[(0,n.jsx)("th",{className:"table__heading w-full",children:"Groupe"}),(0,n.jsx)("th",{className:"table__heading pr-3xl",children:"Nombre d'incidents"})]})}),(0,n.jsx)("tbody",{children:r.map((function(e){return(0,n.jsx)(s.default,{href:"/",passHref:!0,children:(0,n.jsxs)("tr",{onClick:function(){return a(e.label)},className:"pointer table__group",children:[(0,n.jsx)("td",{className:"table__item","data-title":"Groupe",children:e.label}),(0,n.jsx)("td",{className:"table__item","data-title":"Incidents",children:e.data})]},e.label)},e.label)}))})]})})}var f=!0;function d(){var e=(0,a.Z)(),t=(0,i.uniq)((0,i.flatten)(e.map((function(e){return e.groupeImplique.split("\n")})))).map((function(t){return{data:e.filter((function(e){return e.groupeImplique.includes(t)})).length,label:t}})),r=(0,i.orderBy)(t,"data","desc");return(0,n.jsx)("div",{className:"container max-w-xl",children:(0,n.jsxs)("div",{className:"mt-2xl mb-lg",children:[(0,n.jsxs)("h3",{children:["Incidents par groupe - ",0==(null===t||void 0===t?void 0:t.length)?88:t.length," r\xe9sultats"]}),(0,n.jsx)("p",{className:"mt-md mb-lg","aria-label":"Informations sur la recherche",children:"Vous pouvez cliquer sur un groupe pour appliquer le filtre."}),(0,n.jsx)(c,{groupObj:r})]})})}},3260:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSG:function(){return x},database:function(){return j},default:function(){return D}});var n=r(809),a=r.n(n),i=r(5893),l=r(2447),o=r(7294),u=r(5152),s=r(9008),c=r(8093),f=r(9669),d=r.n(f),p=r(8021),h=r(6486);var b=(0,u.default)((function(){return Promise.all([r.e(874),r.e(716)]).then(r.bind(r,111))}),{loadableGenerated:{webpack:function(){return[111]},modules:["index.tsx -> ../components/search-input"]}}),v=(0,u.default)((function(){return r.e(33).then(r.bind(r,6033))}),{loadableGenerated:{webpack:function(){return[6033]},modules:["index.tsx -> ../components/database/database-table"]}}),m=(0,u.default)((function(){return r.e(509).then(r.bind(r,1509))}),{loadableGenerated:{webpack:function(){return[1509]},modules:["index.tsx -> ../components/show-more"]}}),g=(0,u.default)((function(){return r.e(523).then(r.bind(r,9523))}),{loadableGenerated:{webpack:function(){return[9523]},modules:["index.tsx -> ../components/show-more-filters"]}}),y=(0,u.default)((function(){return r.e(2).then(r.bind(r,4002))}),{loadableGenerated:{webpack:function(){return[4002]},modules:["index.tsx -> ../components/tags"]}}),x=!0;function j(){return w.apply(this,arguments)}function w(){return(w=(0,l.Z)(a().mark((function e(){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d().get("https://server-exd.herokuapp.com/database");case 2:return t=e.sent,r=t.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){var e=(0,c.Z)((function(e){return e.filteredDatabase})),t=(0,c.Z)((function(e){return e.loadDatabase})),r=(0,p.Z)();(0,o.useEffect)((function(){return t(r)}),[r,t]);!function(){var e=(0,c.Z)(),t=e.filterByEvents,r=e.filterByType,n=e.filterByDate,a=e.filterSearch,i=e.filterByGroupsInvolved,l=e.filterByDegreeOfViolence,u=e.filterDatabase,s=e.database,f=e.filteredDatabase,d=(0,o.useCallback)((0,h.debounce)((function(){u({type:r,groupeImplique:i,date:n,searchValue:a,evenement:t,degreViolence:l,database:s}),console.log(f)}),300),[a,n,r,t,i,l,s]);(0,o.useEffect)((function(){d()}),[d])}();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.default,{children:(0,i.jsx)("title",{children:"CEFIR - M\xe9thodologie"})}),(0,i.jsx)("div",{className:"container max-w-xl",children:(0,i.jsxs)("div",{className:"mt-2xl mb-lg",children:[(0,i.jsxs)("h3",{children:[(0,i.jsxs)("span",{role:"img","aria-label":"Un pictogramme de recherche",children:["\ud83d\udd0d"," "]}),"Rechercher - ",0==(null===e||void 0===e?void 0:e.length)?0:e.length," r\xe9sultats"]}),(0,i.jsx)("p",{className:"mt-md mb-lg","aria-label":"Informations sur la recherche",children:"Par d\xe9faut, la recherche va inclure toutes les colonnes. Vous pouvez cliquer sur les balises pour les exclure."}),(0,i.jsx)(y,{}),(0,i.jsx)(b,{className:"mt-md"}),(0,i.jsx)(m,{}),(0,i.jsx)(g,{}),(0,i.jsx)(v,{database:e.slice(0,50),className:"mb-2xl"})]})})]})}},8093:function(e,t,r){"use strict";r.d(t,{Z:function(){return f}});var n=r(6265),a=r(4671),i=r(6486);function l(e){var t=e.database,r=e.searchValue,n=e.date,a=e.degreViolence,l=e.evenement,o=e.groupeImplique,u=e.type;return t.filter((function(e){var t=(0,i.deburr)(e.evenement.toLowerCase()),s=(0,i.deburr)(e.groupeImplique.toLowerCase()),c=(0,i.deburr)(e.degreViolence.toLowerCase()),f=(0,i.deburr)(e.date.toLowerCase()),d=(0,i.deburr)(e.type.toLowerCase()),p=(0,i.trim)((0,i.deburr)(r.toLowerCase())),h=p.split(",");return h.length>1?h.map((function(e){return l&&t.includes((0,i.trim)(e))||o&&s.includes((0,i.trim)(e))||a&&c.includes((0,i.trim)(e))||n&&f.includes((0,i.trim)(e))||u&&d.includes((0,i.trim)(e))})).reduce((function(e,t){return e&&t})):l&&t.includes(p)||o&&s.includes(p)||a&&c.includes(p)||n&&f.includes(p)||u&&d.includes(p)}))}var o=function(e,t){return{database:[],filteredDatabase:[],loadDatabase:function(t){e({database:t,filteredDatabase:t})},filterByDate:!0,filterByType:!0,filterByDegreeOfViolence:!0,filterByGroupsInvolved:!0,filterByEvents:!0,toggleFilterByDate:function(){return e({filterByDate:!t().filterByDate})},toggleFilterByType:function(){return e({filterByType:!t().filterByType})},toggleFilterByDegreeOfViolence:function(){return e({filterByDegreeOfViolence:!t().filterByDegreeOfViolence})},toggleFilterByGroupsInvolved:function(){return e({filterByGroupsInvolved:!t().filterByGroupsInvolved})},toggleFilterByEvents:function(){return e({filterByEvents:!t().filterByEvents})},filterSearch:"",handleFilterSearch:function(e){t().setFilterSearch(e.target.value)},setFilterSearch:function(t){e({filterSearch:t})},filterDatabase:function(t){e({filteredDatabase:l(t)})},resetFilters:function(){e({filterSearch:"",filterByDate:!0,filterByType:!0,filterByDegreeOfViolence:!0,filterByGroupsInvolved:!0,filterByEvents:!0,filteredDatabase:t().database})},showMoreFilters:!1,toggleShowMoreFilters:function(){e({showMoreFilters:!t().showMoreFilters})}}},u=function(e,t){return{isDark:!1,toggleDarkMode:function(){e({isDark:!t().isDark})}}};function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f=(0,a.Z)((function(e,t){return c(c({},o(e,t)),u(e,t))}))},9625:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/incidentParGroupes",function(){return r(5981)}])},1664:function(e,t,r){e.exports=r(2167)}},function(e){e.O(0,[662,322,774,888,179],(function(){return t=9625,e(e.s=t);var t}));var t=e.O();_N_E=t}]);