(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{7667:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return j},database:function(){return y},default:function(){return I}});var a=n(809),r=n.n(a),i=n(5893),s=n(2447),u=n(9669),l=n.n(u),c=n(8767);function d(){return(0,c.useQuery)("database",y,{staleTime:3e4}).data||[]}var o=n(7294),p=n(4671),m=n(8597),g=n(8585),f=n(4184),b=n.n(f);function h(e){var t=e.database,n=b()("table__item",{"text-success-800":t.degreViolence.includes("Aucune"),"text-warning-800":t.degreViolence.includes("faible"),"text-caution-800":t.degreViolence.includes("moyenne"),"text-error-800":t.degreViolence.includes("\xc9lev\xe9e")}),a=b()("circle","mr-sm",{"bg-success-500":t.degreViolence.includes("Aucune"),"bg-warning-500":t.degreViolence.includes("faible"),"bg-caution-500":t.degreViolence.includes("moyenne"),"bg-error-500":t.degreViolence.includes("\xc9lev\xe9e")}),r=(0,o.useMemo)((function(){return t.groupeImplique.split("\n")}),[t.groupeImplique]);return(0,i.jsxs)("tr",{className:"table__group",children:[(0,i.jsx)("td",{className:"table__item","data-title":"Date",children:t.date}),(0,i.jsx)("td",{className:"table__item","data-title":"Type",children:t.type}),(0,i.jsxs)("td",{"data-title":"Degr\xe9",className:n,children:[(0,i.jsx)("div",{className:a}),t.degreViolence]}),(0,i.jsx)("td",{className:"table__item","data-title":"Groupes",children:r.map((function(e,t){return(0,i.jsx)("div",{className:b()({"font-italic":0===t}),children:e},t)}))}),(0,i.jsx)("td",{className:"table__item","data-title":"\xc9v\xe9nement",children:t.evenement})]})}function v(e){var t=e.className,n=e.database,a=(0,o.useRef)();(0,g.o)({size:n.length,parentRef:a,estimateSize:(0,o.useCallback)((function(){return 100}),[]),overscan:5});return(0,i.jsxs)("table",{className:b()("table",t),children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{className:"table__heading-group",children:[(0,i.jsx)("th",{className:"table__heading",children:"Date"}),(0,i.jsx)("th",{className:"table__heading",children:"Type d\u2019\xe9v\xe9nement"}),(0,i.jsx)("th",{className:"table__heading",children:"Degr\xe9 de violence"}),(0,i.jsx)("th",{className:"table__heading",children:"Groupe(s) impliqu\xe9(s)"}),(0,i.jsx)("th",{className:"table__heading",children:"\xc9v\xe9nement"})]})}),(0,i.jsx)("tbody",{children:n.map((function(e){return(0,i.jsx)(h,{database:e},e._id)}))})]})}var x=n(6486);function V(e){var t=e.children,n=e.onClick,a=e.isSelected,r=b()("rounded px-sm py-3xs tag pointer",{"bg-contrast-100":a,"tag--selected":!a,"bg-error-200":!a});return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("li",{onClick:n,className:r,children:t})})}var _=n(9359),j=!0;function y(){return N.apply(this,arguments)}function N(){return(N=(0,s.Z)(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l().get("https://server-exd.herokuapp.com/database");case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e){var t=e.database,n=e.searchValue,a=e.date,r=e.degreViolence,i=e.evenement,s=e.groupeImplique,u=e.type;return t.filter((function(e){var t=(0,x.deburr)(e.evenement.toLowerCase()),l=(0,x.deburr)(e.groupeImplique.toLowerCase()),c=(0,x.deburr)(e.degreViolence.toLowerCase()),d=(0,x.deburr)(e.date.toLowerCase()),o=(0,x.deburr)(e.type.toLowerCase()),p=(0,x.trim)((0,x.deburr)(n.toLowerCase())),m=p.split(",");return m.length>1?m.map((function(e){return i&&t.includes((0,x.trim)(e))||s&&l.includes((0,x.trim)(e))||r&&c.includes((0,x.trim)(e))||a&&d.includes((0,x.trim)(e))||u&&o.includes((0,x.trim)(e))})).reduce((function(e,t){return e&&t})):i&&t.includes(p)||s&&l.includes(p)||r&&c.includes(p)||a&&d.includes(p)||u&&o.includes(p)}))}var D=(0,p.Z)((0,m.mW)((function(e){return{filteredDatabase:[],database:[],setDatabase:function(t){return e({database:t,filteredDatabase:t})},date:!0,setDate:function(t){return e((function(e){return{date:t,filteredDatabase:q({database:e.database,date:t,type:e.type,groupeImplique:e.groupeImplique,searchValue:e.searchValue,evenement:e.evenement,degreViolence:e.degreViolence})}}))},type:!0,setType:function(t){return e((function(e){return{type:t,filteredDatabase:q({database:e.database,date:e.date,type:t,groupeImplique:e.groupeImplique,searchValue:e.searchValue,evenement:e.evenement,degreViolence:e.degreViolence})}}))},degreViolence:!0,setDegreViolence:function(t){return e((function(e){return{degreViolence:t,filteredDatabase:q({database:e.database,date:e.date,type:e.type,groupeImplique:e.groupeImplique,searchValue:e.searchValue,evenement:e.evenement,degreViolence:t})}}))},evenement:!0,setEvenement:function(t){return e((function(e){return{evenement:t,filteredDatabase:q({database:e.database,date:e.date,type:e.type,groupeImplique:e.groupeImplique,searchValue:e.searchValue,evenement:t,degreViolence:e.degreViolence})}}))},groupeImplique:!0,setGroupeImplique:function(t){return e((function(e){return{groupeImplique:t,filteredDatabase:q({database:e.database,date:e.date,type:e.type,groupeImplique:t,searchValue:e.searchValue,evenement:e.evenement,degreViolence:e.degreViolence})}}))},resetFilters:function(){return e((function(e){return{searchValue:"",evenement:!0,type:!0,date:!0,groupeImplique:!0,degreViolence:!0,filteredDatabase:e.database}}))},searchValue:"",setSearchValue:function(t){return e((function(e){return{searchValue:t,filteredDatabase:q({database:e.database,date:e.date,type:e.type,groupeImplique:e.groupeImplique,searchValue:t,evenement:e.evenement,degreViolence:e.degreViolence})}}))}}})));function I(){var e=d(),t=D(),n=t.setDatabase,a=t.searchValue,r=t.setSearchValue,s=t.filteredDatabase,u=t.setDate,l=t.date,c=t.degreViolence,p=t.setDegreViolence,m=t.setType,g=t.type,f=t.groupeImplique,b=t.setGroupeImplique,h=t.setEvenement,j=t.evenement,y=t.resetFilters;(0,x.debounce)((function(){}),500);(0,o.useEffect)((function(){return n(e)}),[e,n]);var N=(0,o.useMemo)((function(){return s.length}),[s]);return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"container max-w-xl",children:[(0,i.jsxs)("ul",{className:"flex gap-x-md gap-y-xs flex-wrap font-bold",children:[(0,i.jsx)(V,{onClick:function(){return u(!l)},isSelected:l,children:"Date"}),(0,i.jsx)(V,{onClick:function(){return m(!g)},isSelected:g,children:"Type d\u2019\xe9v\xe9nement"}),(0,i.jsx)(V,{onClick:function(){return p(!c)},isSelected:c,children:"Degr\xe9 de violence"}),(0,i.jsx)(V,{onClick:function(){return b(!f)},isSelected:f,children:"Groupe(s) impliqu\xe9(s)"}),(0,i.jsx)(V,{onClick:function(){return h(!j)},isSelected:j,children:"\xc9v\xe9nement"})]}),_.tq&&(0,i.jsx)("p",{children:"La performance de la page \xe0 \xe9t\xe9 modifier pour votre t\xe9l\xe9phone mobile."}),N,(0,i.jsx)("input",{type:"text",value:a,onChange:function(e){r(e.target.value)}}),(0,i.jsx)("button",{onClick:function(){return y()},children:"reset"}),(0,i.jsx)(v,{database:s,className:"mb-2xl"})]})})}},5301:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(7667)}])}},function(e){e.O(0,[662,72,774,888,179],(function(){return t=5301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);