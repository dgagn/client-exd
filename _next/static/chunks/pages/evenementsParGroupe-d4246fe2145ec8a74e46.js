(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[860],{1256:function(e,r,n){"use strict";n.r(r),n.d(r,{__N_SSG:function(){return g},default:function(){return D}});var t=n(5893),a=n(7294),s=n(4184),o=n.n(s),l=n(7748),u=n(1664),i=n(7516),d=n(374),c=function(e){return{setFilterSearch:e.setFilterSearch,toggleOrderEventsByData:e.toggleOrderEventsByData,toggleOrderEventsByGroupsInvolved:e.toggleOrderEventsByGroupsInvolved,orderEventsByGroupsInvolved:e.orderEventsByGroupsInvolved,orderEventsByData:e.orderEventsByData,setId:e.setId}};function f(e){var r=e.className,n=e.groupObj,s=(0,l.Z)(c,d.Z),f=s.setFilterSearch,p=s.toggleOrderEventsByData,v=s.toggleOrderEventsByGroupsInvolved,y=s.orderEventsByGroupsInvolved,b=s.orderEventsByData,h=s.setId;return(0,a.useEffect)((function(){h("")}),[]),(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("table",{className:o()("table",r),children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"table__heading-group",children:[(0,t.jsxs)("th",{className:"table__heading w-full",onClick:v,children:["Groupe",(0,t.jsx)("span",{children:"desc"===y?(0,t.jsx)(i.jRD,{className:"icon"}):"asc"===y?(0,t.jsx)(i.OrA,{className:"icon"}):(0,t.jsx)(i.jRD,{className:"hidden"})})]}),(0,t.jsxs)("th",{className:"table__heading pr-3xl",onClick:p,children:["Nombre d'\xe9v\xe9nements"," ",(0,t.jsx)("span",{children:"desc"===b?(0,t.jsx)(i.jRD,{className:"icon"}):"asc"===b?(0,t.jsx)(i.OrA,{className:"icon"}):(0,t.jsx)(i.jRD,{className:"hidden"})})]})]})}),(0,t.jsx)("tbody",{children:n.map((function(e){return(0,t.jsx)(u.default,{href:"/",passHref:!0,children:(0,t.jsxs)("tr",{onClick:function(){return f(e.label)},className:"pointer table__group",children:[(0,t.jsx)("td",{className:"table__item","data-title":"Groupe",children:e.label}),(0,t.jsx)("td",{className:"table__item","data-title":"\xc9v\xe9nement",children:e.data})]},e.label)},e.label)}))})]})})}var p=n(9008);function v(e){var r=e.className,n=e.value,a=e.onChange,s=e.id;return(0,t.jsxs)("div",{className:r,children:[(0,t.jsx)(i.wTD,{className:"icon-search"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:s,children:"Barre de recherche"}),(0,t.jsx)("input",{type:"text",className:"form__control pl-xl mt-2xs",onChange:a,value:n,id:s})]})]})}var y=function(e){return{groupsFilterSearch:e.groupsFilterSearch,handleGroupsFilterSearch:e.handleGroupsFilterSearch}};function b(e){var r=e.className,n=(0,l.Z)(y,d.Z),a=n.handleGroupsFilterSearch,s=n.groupsFilterSearch;return(0,t.jsx)(v,{className:r,value:s,onChange:a,id:"groupsFilter"})}var h=function(e){return{groupsFilterSearch:e.groupsFilterSearch,filterSubDatabase:e.filterSubDatabase}};var B=function(e){return{setDatabaseByGroups:e.setDatabaseByGroups,filteredDatabaseByGroups:e.filteredDatabaseByGroups}},g=!0;function D(e){var r=e.database,n=(0,l.Z)(B,d.Z),s=n.setDatabaseByGroups,o=n.filteredDatabaseByGroups;return(0,a.useEffect)((function(){s(r)}),[r,s]),function(){var e=(0,l.Z)(h,d.Z),r=e.filterSubDatabase,n=e.groupsFilterSearch,t=(0,a.useCallback)((function(){return r()}),[r,n]);(0,a.useEffect)((function(){t()}),[t])}(),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.default,{children:(0,t.jsx)("title",{children:"CEFIR - \xc9v\xe9nements par groupe"})}),(0,t.jsx)("div",{className:"container max-w-xl",children:(0,t.jsxs)("div",{className:"mt-2xl mb-lg",children:[(0,t.jsxs)("h3",{children:["\xc9v\xe9nements par groupe"," ",(0,t.jsxs)("span",{className:"resultat",children:[null===o||void 0===o?void 0:o.length," r\xe9sultats"]})]}),(0,t.jsx)("p",{className:"mt-md mb-lg","aria-label":"Informations sur la recherche",children:"Vous pouvez cliquer sur un groupe pour appliquer le filtre."}),(0,t.jsx)(b,{className:"mb-xl"}),(0,t.jsx)("p",{className:"font-italic mt-lg mb-sm","aria-label":"Informations sur les balises",children:"Cliquer sur une colonne pour l'ordonner."}),(0,t.jsx)(f,{groupObj:o})]})})]})}},7748:function(e,r,n){"use strict";n.d(r,{Z:function(){return p}});var t=n(6265),a=n(4671),s=function(e,r){return{isDark:!1,toggleDarkMode:function(){e({isDark:!r().isDark})}}};var o=n(6486);function l(e,r){return{database:[],filteredDatabase:[],databaseByGroups:[],filteredDatabaseByGroups:[],setDatabaseByGroups:function(r){var n=function(e){return(0,o.uniq)((0,o.flatten)(e.map((function(e){return e.groupeImplique.split("\n")}))).map((function(e){return(0,o.trim)(e)})))}(r).map((function(e){return{data:(0,o.orderBy)(r.filter((function(r){return r.groupeImplique.includes(e)})),"data").length,label:e}}));e({databaseByGroups:n})},loadDatabase:function(r){return e({database:r,filteredDatabase:r})}}}function u(e){var r=e.database,n=e.filterSearch,t=e.date,a=e.degreeOfViolence,s=e.events,l=e.groupsInvolved,u=e.type;return r.filter((function(e){var r=(0,o.deburr)(e.evenement.toLowerCase()),i=(0,o.deburr)(e.groupeImplique.toLowerCase()),d=(0,o.deburr)(e.degreViolence.toLowerCase()),c=(0,o.deburr)(e.date.toLowerCase()),f=(0,o.deburr)(e.type.toLowerCase()),p=(0,o.trim)((0,o.deburr)(n.toLowerCase())),v=p.split(","),y=p.startsWith("!"),b=y?p.replace("!",""):p;return""===b||(v.length>1?v.map((function(e){var n=(0,o.deburr)((0,o.trim)(e)),p=n.startsWith("!"),v=p?n.replace("!",""):n;return""===v||(p?!r.includes(v)&&!i.includes(v)&&!d.includes(v)&&!c.includes(v)&&!f.includes(v):s&&r.includes(v)||l&&i.includes(v)||a&&d.includes(v)||t&&c.includes(v)||u&&f.includes(v))})).reduce((function(e,r){return e&&r})):y?!r.includes(b)&&!i.includes(b)&&!d.includes(b)&&!c.includes(b)&&!f.includes(b):s&&r.includes(b)||l&&i.includes(b)||a&&d.includes(b)||t&&c.includes(b)||u&&f.includes(b))}))}var i=n(7484),d=n.n(i);function c(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function f(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?c(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var p=(0,a.Z)((function(e,r){return f(f(f(f(f(f(f(f({},s(e,r)),function(e,r){return{filterSearch:"",setFilterSearch:function(r){e({filterSearch:r})},handleFilterSearch:function(e){r().setFilterSearch(e.target.value)},groupsFilterSearch:"",setGroupsFilterSearch:function(r){e({groupsFilterSearch:r})},handleGroupsFilterSearch:function(e){r().setGroupsFilterSearch(e.target.value)}}}(e,r)),l(e)),function(e,r){return{filterByDate:!0,filterByDegreeOfViolence:!0,filterByEvents:!0,filterByGroupsInvolved:!0,filterByType:!0,toggleFilterByDate:function(){return e({filterByDate:!r().filterByDate})},toggleFilterByDegreeOfViolence:function(){return e({filterByDegreeOfViolence:!r().filterByDegreeOfViolence})},toggleFilterByEvents:function(){return e({filterByEvents:!r().filterByEvents})},toggleFilterByGroupsInvolved:function(){return e({filterByGroupsInvolved:!r().filterByGroupsInvolved})},toggleFilterByType:function(){return e({filterByType:!r().filterByType})},filterDatabase:function(n){return e({filteredDatabase:r().orderDatabase(u(n))})},filterSubDatabase:function(){var n=r().groupsFilterSearch,t=r().databaseByGroups.filter((function(e){var r=(0,o.deburr)((0,o.trim)(e.label.toLowerCase())),t=(0,o.deburr)((0,o.trim)(n.toLowerCase()));return r.includes(t)}));e({filteredDatabaseByGroups:r().orderSubDatabase(t)})}}}(e,r)),function(e,r){return{resetFilters:function(){e({filterSearch:"",filterByDate:!0,filterByType:!0,filterByDegreeOfViolence:!0,filterByGroupsInvolved:!0,filterByEvents:!0,filteredDatabase:r().database,orderByDate:"none",orderByEvents:"none",orderByType:"none",orderByDegreeOfViolence:"none",orderByGroupsInvolved:"none"})}}}(e,r)),function(e,r){return{showMoreFilters:!1,toggleShowMoreFilters:function(){return e({showMoreFilters:!r().showMoreFilters})}}}(e,r)),function(e,r){return{orderByDate:"none",toggleOrderByDate:function(){e({orderByDate:"none"===r().orderByDate?"desc":"desc"===r().orderByDate?"asc":(r().orderByDate,"none")}),e({filteredDatabase:r().orderDatabase(r().filteredDatabase)})},orderByDegreeOfViolence:"none",toggleOrderByDegreeOfViolence:function(){e({orderByDegreeOfViolence:"none"===r().orderByDegreeOfViolence?"desc":"desc"===r().orderByDegreeOfViolence?"asc":(r().orderByDegreeOfViolence,"none")}),e({filteredDatabase:r().orderDatabase(r().filteredDatabase)})},orderByEvents:"none",toggleOrderByEvents:function(){e({orderByEvents:"none"===r().orderByEvents?"desc":"desc"===r().orderByEvents?"asc":(r().orderByEvents,"none")}),e({filteredDatabase:r().orderDatabase(r().filteredDatabase)})},orderByGroupsInvolved:"none",toggleOrderByGroupsInvolved:function(){e({orderByGroupsInvolved:"none"===r().orderByGroupsInvolved?"desc":"desc"===r().orderByGroupsInvolved?"asc":(r().orderByGroupsInvolved,"none")}),e({filteredDatabase:r().orderDatabase(r().filteredDatabase)})},orderByType:"none",toggleOrderByType:function(){e({orderByType:"none"===r().orderByType?"desc":"desc"===r().orderByType?"asc":(r().orderByType,"none")}),e({filteredDatabase:r().orderDatabase(r().filteredDatabase)})},orderEventsByGroupsInvolved:"none",toggleOrderEventsByGroupsInvolved:function(){e({orderEventsByGroupsInvolved:"none"===r().orderEventsByGroupsInvolved?"desc":"desc"===r().orderEventsByGroupsInvolved?"asc":(r().orderEventsByGroupsInvolved,"none")}),e({filteredDatabaseByGroups:r().orderSubDatabase(r().filteredDatabaseByGroups)})},orderEventsByData:"none",toggleOrderEventsByData:function(){e({orderEventsByData:"none"===r().orderEventsByData?"desc":"desc"===r().orderEventsByData?"asc":(r().orderEventsByData,"none")}),e({filteredDatabaseByGroups:r().orderSubDatabase(r().filteredDatabaseByGroups)})},orderSubDatabase:function(e){var n=[],t=[],a=r().orderEventsByGroupsInvolved,s=r().orderEventsByData;return"none"===s&&"none"===a&&n.push("data")&&t.push("desc"),"none"!==s&&n.push("data")&&t.push(s),"none"!==a&&n.push((function(e){return(0,o.deburr)(e.label)}))&&t.push(a),(0,o.orderBy)(e,n,t)},orderDatabase:function(e){var n=[],t=[],a=r().orderByDate,s=r().orderByDegreeOfViolence,l=r().orderByEvents,u=r().orderByGroupsInvolved,i=r().orderByType;return"none"===a&&"none"===s&&"none"===l&&"none"===u&&"none"===i&&n.push("date")&&t.push("asc"),"none"!==a&&n.push((function(e){return"none"!==s||"none"!==l||"none"!==u||"none"!==i?d()(e.date).format("YYYY-MM"):e.date}))&&t.push(a),"none"!==s&&n.push((function(e){return e.degreViolence.replace(/.*\(/gim,"")}))&&t.push(s),"none"!==l&&n.push((function(e){return(0,o.deburr)(e.evenement)}))&&t.push(l),"none"!==u&&n.push((function(e){return e.groupeImplique.split("\n").map((function(e){return(0,o.deburr)(e)}))}))&&t.push(u),"none"!==i&&n.push((function(e){return(0,o.deburr)(e.type)}))&&t.push(i),t.length>1&&t.push("asc")&&n.push("_id"),(0,o.orderBy)(e,n,t)}}}(e,r)),function(e,r){return{id:"",setId:function(r){e({id:r})}}}(e))}))},5669:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/evenementsParGroupe",function(){return n(1256)}])}},function(e){e.O(0,[662,874,754,774,888,179],(function(){return r=5669,e(e.s=r);var r}));var r=e.O();_N_E=r}]);