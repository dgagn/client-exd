(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[222],{8032:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});var n=t(5893),o=(t(7294),t(4184)),a=t.n(o);function s(e){var r=e.className,t=e.children,o=e.color,s=void 0===o?"primary":o,l=e.onClick,i=void 0===l?function(){}:l;return(0,n.jsx)("button",{className:a()("icon-circle pointer",r),"data-color":s,onClick:i,"aria-label":"Un bouton avec une couleur ".concat(s,"."),children:t})}},908:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});var n=t(5893),o=(t(7294),t(4184)),a=t.n(o);function s(e){var r=e.children,t=e.onClick,o=e.isSelected,s=a()("rounded px-sm py-xs tag pointer",{"tag--selected":!o});return(0,n.jsx)("li",{"aria-label":"Tag pour exclure ".concat(r),className:"mb-sm",children:(0,n.jsx)("button",{onClick:t,className:s,children:r})})}},1576:function(e,r,t){"use strict";t.r(r),t.d(r,{__N_SSG:function(){return w},default:function(){return E}});var n=t(5893),o=t(7294),a=t(1664),s=t(7484),l=t.n(s),i=t(7989),c=t.n(i),u=t(908),d=t(4184),f=t.n(d),p=t(7856),v=t.n(p),y=t(6411),g=t(374),m=t(9008),b=t(8834),h=t(7516),x=t(8032),B=t(8193),D=function(e){return{filteredDatabase:e.filteredDatabase,setId:e.setId}},j=function(e){return{setPersistantViewedIds:e.setPersistantViewedIds,toggleBookmarkId:e.toggleBookmarkId,addToListe:e.addToListe,liste:e.liste,deleteToListe:e.deleteToListe}},w=!0;function E(e){var r=e.entry,t=(0,o.useState)(null),s=t[0],i=t[1],d=(0,y.Z)(D,g.Z),p=d.filteredDatabase,w=d.setId,E=(0,b.Z)(j,g.Z),O=E.setPersistantViewedIds,_=E.deleteToListe,N=E.addToListe,I=E.liste,S=(0,o.useState)(null),G=S[0],V=S[1],T=(0,o.useState)(null),C=T[0],F=T[1],L=(0,o.useState)(""),k=L[0],Z=L[1],M=(0,o.useState)(""),P=M[0],A=M[1];(0,o.useEffect)((function(){var e=p.findIndex((function(e){return e._id===r._id})),t=p[e+1],n=p[e-1],o=t&&p[e+1]._id,a=n&&p[e-1]._id;V(o||null),F(a||null),w(r._id),O(r._id)}),[p,r._id,w,O]);var Y=f()("",{"text-success-800":r.degreViolence.includes("Aucune"),"text-warning-800":r.degreViolence.includes("faible"),"text-caution-800":r.degreViolence.includes("moyenne"),"text-error-800":r.degreViolence.includes("\xc9lev\xe9e")}),q=f()("circle","mr-sm",{"bg-success-500":r.degreViolence.includes("Aucune"),"bg-warning-500":r.degreViolence.includes("faible"),"bg-caution-500":r.degreViolence.includes("moyenne"),"bg-error-500":r.degreViolence.includes("\xc9lev\xe9e")}),H=r.source.match(/(?:(?:https?|ftp|file):\/\/|www\.|ftp\.)(?:\([-A-Z0-9+&@#\/%=~_|$?!:,.]*\)|[-A-Z0-9+&@#\/%=~_|$?!:,.])*(?:\([-A-Z0-9+&@#\/%=~_|$?!:,.]*\)|[A-Z0-9+&@#\/%=~_|$])/gim);(0,o.useEffect)((function(){var e=r.source;H&&H.forEach((function(r){e=e.replace(r,'<a href="'.concat(r,'" target="_blank" rel="noreferrer" class="text-bg-fx text-bg-fx--scale-y">').concat(r,"</a>"))}));var t=v()(window);i({__html:t.sanitize(e,{ADD_ATTR:["target"]})})}),[]);var $=(0,o.useCallback)((function(e){!function(){var e="",r=document.activeElement,t=r?r.tagName.toLowerCase():null;"textarea"==t||"input"==t&&/^(?:text|search|password|tel|url)$/i.test(r.type)&&"number"==typeof r.selectionStart?e=r.value.slice(r.selectionStart,r.selectionEnd):window.getSelection&&(e=window.getSelection().toString())}()}),[]),R=(0,o.useMemo)((function(){var e=r._id,t=[];return I.forEach((function(r){var n=r.ids,o=r.nom;(null===n||void 0===n?void 0:n.includes(e))&&t.push(o)})),t}),[r._id,I]);(0,o.useEffect)((function(){console.log(R)}),[R]);var U=(0,o.useMemo)((function(){return I.map((function(e){return e.nom})).filter((function(e){return!R.includes(e)}))}),[I,R]),z=(0,o.useMemo)((function(){return I.map((function(e){return e.nom})).filter((function(e){return R.includes(e)}))}),[I,R]);return(0,o.useEffect)((function(){Z(U[0]),A(z[0])}),[U,z]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m.default,{children:(0,n.jsxs)("title",{children:["\xc9v\xe9nement - ",r.evenement]})}),(0,n.jsx)("div",{className:"p-xl mt-lg bg-article text-center",children:(0,n.jsxs)("div",{className:"blur p-xl max-w-md mx-auto my-auto text-contrast-50 bg-blur",children:[(0,n.jsx)("h2",{className:"text-contrast-50",children:r.evenement}),(0,n.jsx)("p",{className:"text-contrast-50 mt-sm text-center",children:l()(r.date).locale(c()).format("le D MMMM, YYYY")}),(0,n.jsx)("p",{className:"mt-sm text-warning-500 font-bold flex gap-x-md flex-wrap justify-center",children:R.map((function(e){return(0,n.jsx)("span",{children:e},e)}))})]})}),(0,n.jsx)("div",{className:"container max-w-xl",children:(0,n.jsx)("div",{className:"mt-2xl mb-2xl",children:(0,n.jsxs)("div",{className:"max-w-prose mx-auto",children:[(0,n.jsxs)("div",{className:"flex space-between gap-y-md mb-xl",children:[C?(0,n.jsx)(a.default,{href:"/evenement/".concat(C),passHref:!0,children:(0,n.jsx)("button",{className:"button-reset text-bg-fx text-bg-fx--scale-y",children:(0,n.jsxs)("span",{className:"flex align-center",children:[(0,n.jsx)(h.gbs,{className:"mr-3xs color-icon"})," ","Pr\xe9c\xe9dent"]})})}):(0,n.jsx)("div",{}),G&&(0,n.jsx)(a.default,{href:"/evenement/".concat(G),passHref:!0,children:(0,n.jsx)("button",{className:"button-reset text-bg-fx text-bg-fx--scale-y",children:(0,n.jsxs)("span",{className:"flex align-center",children:["Suivant ",(0,n.jsx)(h.lU2,{className:"ml-3xs color-icon"})]})})})]}),(0,n.jsx)(a.default,{href:"/",passHref:!0,children:(0,n.jsx)("button",{className:"button-reset text-bg-fx text-bg-fx--scale-y mb-xl",children:"Retour \xe0 l'accueil"})}),(0,n.jsxs)("div",{className:"pb-lg flex gap-y-md flex-column",children:[U.length>0&&(0,n.jsxs)("div",{className:"flex gap-x-md align-center flex-wrap gap-y-md",children:[(0,n.jsx)("label",{htmlFor:"ajouterListe",children:"Ajouter \xe0 la liste"}),1!==U.length?(0,n.jsx)("select",{value:k,onBlur:function(e){return k!==e.target.value&&Z(e.target.value)},onChange:function(e){return k!==e.target.value&&Z(e.target.value)},name:"ajouter",id:"ajouterListe",className:"form__control w-auto",children:U.map((function(e){return(0,n.jsx)("option",{value:e,children:e},e)}))}):(0,n.jsx)("p",{children:U[0]}),(0,n.jsx)(x.Z,{color:"success",onClick:function(){return N(k,r._id)},children:(0,n.jsx)(B.bzc,{})})]}),z.length>0&&(0,n.jsxs)("div",{className:"flex gap-x-md align-center flex-wrap gap-y-md",children:[(0,n.jsx)("label",{htmlFor:"retirerListe",children:"Retirer de la liste"}),1!==z.length?(0,n.jsx)("select",{onBlur:function(e){return k!==e.target.value&&Z(e.target.value)},onChange:function(e){return P!==e.target.value&&A(e.target.value)},name:"retirer",id:"retirerListe",className:"form__control w-auto",children:z.map((function(e){return(0,n.jsx)("option",{value:e,children:e},e)}))}):(0,n.jsx)("p",{children:z[0]}),(0,n.jsx)(x.Z,{color:"error",onClick:function(){return _(P,r._id)},children:(0,n.jsx)(B.oHP,{})})]})]}),(0,n.jsx)("p",{className:"mt-lg",onMouseUpCapture:$,children:r.description}),(0,n.jsx)("ul",{className:"flex gap-x-md flex-wrap mt-md",children:r.groupeImplique.split("\n").map((function(e){return(0,n.jsx)(u.Z,{onClick:function(){},isSelected:!0,children:e},e)}))}),(0,n.jsxs)("div",{className:"my-sm",children:[r.type,""!==r.typeCrime?" / ".concat(r.typeCrime):null]}),(0,n.jsxs)("div",{className:Y,children:[(0,n.jsx)("div",{className:q}),r.degreViolence]}),(0,n.jsx)("div",{className:"mt-sm",dangerouslySetInnerHTML:s})]})})})]})}},6411:function(e,r,t){"use strict";t.d(r,{Z:function(){return f}});var n=t(6265),o=t(4671);var a=t(6486);function s(e,r){return{database:[],filteredDatabase:[],databaseByGroups:[],filteredDatabaseByGroups:[],setDatabaseByGroups:function(r){var t=function(e){return(0,a.uniq)((0,a.flatten)(e.map((function(e){return e.groupeImplique.split("\n")}))).map((function(e){return(0,a.trim)(e)})))}(r).map((function(e){return{data:(0,a.orderBy)(r.filter((function(r){return r.groupeImplique.includes(e)})),"data").length,label:e}}));e({databaseByGroups:t})},loadDatabase:function(r){return e({database:r,filteredDatabase:r})}}}function l(e){var r=e.database,t=e.filterSearch,n=e.date,o=e.degreeOfViolence,s=e.events,l=e.groupsInvolved,i=e.type;return r.filter((function(e){var r=(0,a.deburr)(e.evenement.toLowerCase()),c=(0,a.deburr)(e.groupeImplique.toLowerCase()),u=(0,a.deburr)(e.degreViolence.toLowerCase()),d=(0,a.deburr)(e.date.toLowerCase()),f=(0,a.deburr)(e.type.toLowerCase()),p=(0,a.trim)((0,a.deburr)(t.toLowerCase())),v=p.split(","),y=p.startsWith("!"),g=y?p.replace("!",""):p;return""===g||(v.length>1?v.map((function(e){var t=(0,a.deburr)((0,a.trim)(e)),p=t.startsWith("!"),v=p?t.replace("!",""):t;return""===v||(p?!r.includes(v)&&!c.includes(v)&&!u.includes(v)&&!d.includes(v)&&!f.includes(v):s&&r.includes(v)||l&&c.includes(v)||o&&u.includes(v)||n&&d.includes(v)||i&&f.includes(v))})).reduce((function(e,r){return e&&r})):y?!r.includes(g)&&!c.includes(g)&&!u.includes(g)&&!d.includes(g)&&!f.includes(g):s&&r.includes(g)||l&&c.includes(g)||o&&u.includes(g)||n&&d.includes(g)||i&&f.includes(g))}))}var i=t(7484),c=t.n(i);function u(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function d(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?u(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var f=(0,o.Z)((function(e,r){return d(d(d(d(d(d(d({},function(e,r){return{filterSearch:"",setFilterSearch:function(r){e({filterSearch:r})},handleFilterSearch:function(e){r().setFilterSearch(e.target.value)},groupsFilterSearch:"",setGroupsFilterSearch:function(r){e({groupsFilterSearch:r})},handleGroupsFilterSearch:function(e){r().setGroupsFilterSearch(e.target.value)}}}(e,r)),s(e)),function(e,r){return{filterByDate:!0,filterByDegreeOfViolence:!0,filterByEvents:!0,filterByGroupsInvolved:!0,filterByType:!0,toggleFilterByDate:function(){return e({filterByDate:!r().filterByDate})},toggleFilterByDegreeOfViolence:function(){return e({filterByDegreeOfViolence:!r().filterByDegreeOfViolence})},toggleFilterByEvents:function(){return e({filterByEvents:!r().filterByEvents})},toggleFilterByGroupsInvolved:function(){return e({filterByGroupsInvolved:!r().filterByGroupsInvolved})},toggleFilterByType:function(){return e({filterByType:!r().filterByType})},filterDatabase:function(t){return e({filteredDatabase:r().orderDatabase(l(t))})},filterSubDatabase:function(){var t=r().groupsFilterSearch,n=r().databaseByGroups.filter((function(e){var r=(0,a.deburr)((0,a.trim)(e.label.toLowerCase())),n=(0,a.deburr)((0,a.trim)(t.toLowerCase()));return r.includes(n)}));e({filteredDatabaseByGroups:r().orderSubDatabase(n)})}}}(e,r)),function(e,r){return{resetFilters:function(){e({filterSearch:"",filterByDate:!0,filterByType:!0,filterByDegreeOfViolence:!0,filterByGroupsInvolved:!0,filterByEvents:!0,filteredDatabase:r().database,orderByDate:"none",orderByEvents:"none",orderByType:"none",orderByDegreeOfViolence:"none",orderByGroupsInvolved:"none"})}}}(e,r)),function(e,r){return{showMoreFilters:!1,toggleShowMoreFilters:function(){return e({showMoreFilters:!r().showMoreFilters})}}}(e,r)),function(e,r){return{orderByDate:"none",toggleOrderByDate:function(){e({orderByDate:"none"===r().orderByDate?"desc":"desc"===r().orderByDate?"asc":(r().orderByDate,"none")}),e({filteredDatabase:r().orderDatabase(r().filteredDatabase)})},orderByDegreeOfViolence:"none",toggleOrderByDegreeOfViolence:function(){e({orderByDegreeOfViolence:"none"===r().orderByDegreeOfViolence?"desc":"desc"===r().orderByDegreeOfViolence?"asc":(r().orderByDegreeOfViolence,"none")}),e({filteredDatabase:r().orderDatabase(r().filteredDatabase)})},orderByEvents:"none",toggleOrderByEvents:function(){e({orderByEvents:"none"===r().orderByEvents?"desc":"desc"===r().orderByEvents?"asc":(r().orderByEvents,"none")}),e({filteredDatabase:r().orderDatabase(r().filteredDatabase)})},orderByGroupsInvolved:"none",toggleOrderByGroupsInvolved:function(){e({orderByGroupsInvolved:"none"===r().orderByGroupsInvolved?"desc":"desc"===r().orderByGroupsInvolved?"asc":(r().orderByGroupsInvolved,"none")}),e({filteredDatabase:r().orderDatabase(r().filteredDatabase)})},orderByType:"none",toggleOrderByType:function(){e({orderByType:"none"===r().orderByType?"desc":"desc"===r().orderByType?"asc":(r().orderByType,"none")}),e({filteredDatabase:r().orderDatabase(r().filteredDatabase)})},orderEventsByGroupsInvolved:"none",toggleOrderEventsByGroupsInvolved:function(){e({orderEventsByGroupsInvolved:"none"===r().orderEventsByGroupsInvolved?"desc":"desc"===r().orderEventsByGroupsInvolved?"asc":(r().orderEventsByGroupsInvolved,"none")}),e({filteredDatabaseByGroups:r().orderSubDatabase(r().filteredDatabaseByGroups)})},orderEventsByData:"none",toggleOrderEventsByData:function(){e({orderEventsByData:"none"===r().orderEventsByData?"desc":"desc"===r().orderEventsByData?"asc":(r().orderEventsByData,"none")}),e({filteredDatabaseByGroups:r().orderSubDatabase(r().filteredDatabaseByGroups)})},orderSubDatabase:function(e){var t=[],n=[],o=r().orderEventsByGroupsInvolved,s=r().orderEventsByData;return"none"===s&&"none"===o&&t.push("data")&&n.push("desc"),"none"!==s&&t.push("data")&&n.push(s),"none"!==o&&t.push((function(e){return(0,a.deburr)(e.label)}))&&n.push(o),(0,a.orderBy)(e,t,n)},orderDatabase:function(e){var t=[],n=[],o=r().orderByDate,s=r().orderByDegreeOfViolence,l=r().orderByEvents,i=r().orderByGroupsInvolved,u=r().orderByType;return"none"===o&&"none"===s&&"none"===l&&"none"===i&&"none"===u&&t.push("date")&&n.push("asc"),"none"!==o&&t.push((function(e){return"none"!==s||"none"!==l||"none"!==i||"none"!==u?c()(e.date).format("YYYY-MM"):e.date}))&&n.push(o),"none"!==s&&t.push((function(e){return e.degreViolence.replace(/.*\(/gim,"")}))&&n.push(s),"none"!==l&&t.push((function(e){return(0,a.deburr)(e.evenement)}))&&n.push(l),"none"!==i&&t.push((function(e){return e.groupeImplique.split("\n").map((function(e){return(0,a.deburr)(e)}))}))&&n.push(i),"none"!==u&&t.push((function(e){return(0,a.deburr)(e.type)}))&&n.push(u),n.length>1&&n.push("asc")&&t.push("_id"),(0,a.orderBy)(e,t,n)}}}(e,r)),function(e,r){return{id:"",setId:function(r){e({id:r})}}}(e))}))},9621:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/evenement/[id]",function(){return t(1576)}])}},function(e){e.O(0,[874,617,11,774,888,179],(function(){return r=9621,e(e.s=r);var r}));var r=e.O();_N_E=r}]);