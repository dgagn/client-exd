(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[860],{1256:function(e,r,t){"use strict";t.r(r),t.d(r,{__N_SSG:function(){return g},default:function(){return D}});var n=t(5893),a=t(7294),s=t(4184),o=t.n(s),l=t(1478),u=t(1664),i=t(7516),d=t(374),c=function(e){return{setFilterSearch:e.setFilterSearch,toggleOrderEventsByData:e.toggleOrderEventsByData,toggleOrderEventsByGroupsInvolved:e.toggleOrderEventsByGroupsInvolved,orderEventsByGroupsInvolved:e.orderEventsByGroupsInvolved,orderEventsByData:e.orderEventsByData}};function f(e){var r=e.className,t=e.groupObj,a=(0,l.Z)(c,d.Z),s=a.setFilterSearch,f=a.toggleOrderEventsByData,p=a.toggleOrderEventsByGroupsInvolved,v=a.orderEventsByGroupsInvolved,y=a.orderEventsByData;return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("table",{className:o()("table",r),children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{className:"table__heading-group",children:[(0,n.jsxs)("th",{className:"table__heading w-full",onClick:p,children:["Groupe",(0,n.jsx)("span",{children:"desc"===v?(0,n.jsx)(i.jRD,{className:"icon"}):"asc"===v?(0,n.jsx)(i.OrA,{className:"icon"}):(0,n.jsx)(i.jRD,{className:"hidden"})})]}),(0,n.jsxs)("th",{className:"table__heading pr-3xl",onClick:f,children:["Nombre d'\xe9v\xe9nements"," ",(0,n.jsx)("span",{children:"desc"===y?(0,n.jsx)(i.jRD,{className:"icon"}):"asc"===y?(0,n.jsx)(i.OrA,{className:"icon"}):(0,n.jsx)(i.jRD,{className:"hidden"})})]})]})}),(0,n.jsx)("tbody",{children:t.map((function(e){return(0,n.jsx)(u.default,{href:"/",passHref:!0,children:(0,n.jsxs)("tr",{onClick:function(){return s(e.label)},className:"pointer table__group",children:[(0,n.jsx)("td",{className:"table__item","data-title":"Groupe",children:e.label}),(0,n.jsx)("td",{className:"table__item","data-title":"\xc9v\xe9nement",children:e.data})]},e.label)},e.label)}))})]})})}var p=t(9008);function v(e){var r=e.className,t=e.value,a=e.onChange,s=e.id;return(0,n.jsxs)("div",{className:r,children:[(0,n.jsx)(i.wTD,{className:"icon-search"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:s,children:"Barre de recherche"}),(0,n.jsx)("input",{type:"text",className:"form__control pl-xl mt-2xs",onChange:a,value:t,id:s})]})]})}var y=function(e){return{groupsFilterSearch:e.groupsFilterSearch,handleGroupsFilterSearch:e.handleGroupsFilterSearch}};function b(e){var r=e.className,t=(0,l.Z)(y,d.Z),a=t.handleGroupsFilterSearch,s=t.groupsFilterSearch;return(0,n.jsx)(v,{className:r,value:s,onChange:a,id:"groupsFilter"})}var h=function(e){return{groupsFilterSearch:e.groupsFilterSearch,filterSubDatabase:e.filterSubDatabase}};var B=function(e){return{setDatabaseByGroups:e.setDatabaseByGroups,filteredDatabaseByGroups:e.filteredDatabaseByGroups}},g=!0;function D(e){var r=e.database,t=(0,l.Z)(B,d.Z),s=t.setDatabaseByGroups,o=t.filteredDatabaseByGroups;return(0,a.useEffect)((function(){s(r)}),[r,s]),function(){var e=(0,l.Z)(h,d.Z),r=e.filterSubDatabase,t=e.groupsFilterSearch,n=(0,a.useCallback)((function(){return r()}),[r,t]);(0,a.useEffect)((function(){n()}),[n])}(),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.default,{children:(0,n.jsx)("title",{children:"CEFIR - \xc9v\xe9nements par groupe"})}),(0,n.jsx)("div",{className:"container max-w-xl",children:(0,n.jsxs)("div",{className:"mt-2xl mb-lg",children:[(0,n.jsxs)("h3",{children:["\xc9v\xe9nements par groupe"," ",(0,n.jsxs)("span",{className:"resultat",children:[null===o||void 0===o?void 0:o.length," r\xe9sultats"]})]}),(0,n.jsx)("p",{className:"mt-md mb-lg","aria-label":"Informations sur la recherche",children:"Vous pouvez cliquer sur un groupe pour appliquer le filtre."}),(0,n.jsx)(b,{className:"mb-xl"}),(0,n.jsx)(f,{groupObj:o})]})})]})}},1478:function(e,r,t){"use strict";t.d(r,{Z:function(){return p}});var n=t(6265),a=t(4671),s=function(e,r){return{isDark:!1,toggleDarkMode:function(){e({isDark:!r().isDark})}}};var o=t(6486);function l(e,r){return{database:[],filteredDatabase:[],databaseByGroups:[],filteredDatabaseByGroups:[],setDatabaseByGroups:function(r){var t=function(e){return(0,o.uniq)((0,o.flatten)(e.map((function(e){return e.groupeImplique.split("\n")}))).map((function(e){return(0,o.trim)(e)})))}(r).map((function(e){return{data:(0,o.orderBy)(r.filter((function(r){return r.groupeImplique.includes(e)})),"data").length,label:e}}));e({databaseByGroups:t})},loadDatabase:function(r){return e({database:r,filteredDatabase:r})}}}function u(e){var r=e.database,t=e.filterSearch,n=e.date,a=e.degreeOfViolence,s=e.events,l=e.groupsInvolved,u=e.type;return r.filter((function(e){var r=(0,o.deburr)(e.evenement.toLowerCase()),i=(0,o.deburr)(e.groupeImplique.toLowerCase()),d=(0,o.deburr)(e.degreViolence.toLowerCase()),c=(0,o.deburr)(e.date.toLowerCase()),f=(0,o.deburr)(e.type.toLowerCase()),p=(0,o.trim)((0,o.deburr)(t.toLowerCase())),v=p.split(","),y=p.startsWith("!"),b=y?p.replace("!",""):p;return""===b||(v.length>1?v.map((function(e){var t=(0,o.deburr)((0,o.trim)(e)),p=t.startsWith("!"),v=p?t.replace("!",""):t;return""===v||(p?!r.includes(v)&&!i.includes(v)&&!d.includes(v)&&!c.includes(v)&&!f.includes(v):s&&r.includes(v)||l&&i.includes(v)||a&&d.includes(v)||n&&c.includes(v)||u&&f.includes(v))})).reduce((function(e,r){return e&&r})):y?!r.includes(b)&&!i.includes(b)&&!d.includes(b)&&!c.includes(b)&&!f.includes(b):s&&r.includes(b)||l&&i.includes(b)||a&&d.includes(b)||n&&c.includes(b)||u&&f.includes(b))}))}var i=t(7484),d=t.n(i);function c(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function f(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?c(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var p=(0,a.Z)((function(e,r){return f(f(f(f(f(f(f({},s(e,r)),function(e,r){return{filterSearch:"",setFilterSearch:function(r){e({filterSearch:r})},handleFilterSearch:function(e){r().setFilterSearch(e.target.value)},groupsFilterSearch:"",setGroupsFilterSearch:function(r){e({groupsFilterSearch:r})},handleGroupsFilterSearch:function(e){r().setGroupsFilterSearch(e.target.value)}}}(e,r)),l(e)),function(e,r){return{filterByDate:!0,filterByDegreeOfViolence:!0,filterByEvents:!0,filterByGroupsInvolved:!0,filterByType:!0,toggleFilterByDate:function(){return e({filterByDate:!r().filterByDate})},toggleFilterByDegreeOfViolence:function(){return e({filterByDegreeOfViolence:!r().filterByDegreeOfViolence})},toggleFilterByEvents:function(){return e({filterByEvents:!r().filterByEvents})},toggleFilterByGroupsInvolved:function(){return e({filterByGroupsInvolved:!r().filterByGroupsInvolved})},toggleFilterByType:function(){return e({filterByType:!r().filterByType})},filterDatabase:function(t){return e({filteredDatabase:r().orderDatabase(u(t))})},filterSubDatabase:function(){var t=r().groupsFilterSearch,n=r().databaseByGroups.filter((function(e){var r=(0,o.deburr)((0,o.trim)(e.label.toLowerCase())),n=(0,o.deburr)((0,o.trim)(t.toLowerCase()));return r.includes(n)}));e({filteredDatabaseByGroups:r().orderSubDatabase(n)})}}}(e,r)),function(e,r){return{resetFilters:function(){e({filterSearch:"",filterByDate:!0,filterByType:!0,filterByDegreeOfViolence:!0,filterByGroupsInvolved:!0,filterByEvents:!0,filteredDatabase:r().database})}}}(e,r)),function(e,r){return{showMoreFilters:!1,toggleShowMoreFilters:function(){return e({showMoreFilters:!r().showMoreFilters})}}}(e,r)),function(e,r){return{orderByDate:"none",toggleOrderByDate:function(){e({orderByDate:"none"===r().orderByDate?"desc":"desc"===r().orderByDate?"asc":(r().orderByDate,"none")}),e({filteredDatabase:r().orderDatabase(r().filteredDatabase)})},orderByDegreeOfViolence:"none",toggleOrderByDegreeOfViolence:function(){e({orderByDegreeOfViolence:"none"===r().orderByDegreeOfViolence?"desc":"desc"===r().orderByDegreeOfViolence?"asc":(r().orderByDegreeOfViolence,"none")}),e({filteredDatabase:r().orderDatabase(r().filteredDatabase)})},orderByEvents:"none",toggleOrderByEvents:function(){e({orderByEvents:"none"===r().orderByEvents?"desc":"desc"===r().orderByEvents?"asc":(r().orderByEvents,"none")}),e({filteredDatabase:r().orderDatabase(r().filteredDatabase)})},orderByGroupsInvolved:"none",toggleOrderByGroupsInvolved:function(){e({orderByGroupsInvolved:"none"===r().orderByGroupsInvolved?"desc":"desc"===r().orderByGroupsInvolved?"asc":(r().orderByGroupsInvolved,"none")}),e({filteredDatabase:r().orderDatabase(r().filteredDatabase)})},orderByType:"none",toggleOrderByType:function(){e({orderByType:"none"===r().orderByType?"desc":"desc"===r().orderByType?"asc":(r().orderByType,"none")}),e({filteredDatabase:r().orderDatabase(r().filteredDatabase)})},orderEventsByGroupsInvolved:"none",toggleOrderEventsByGroupsInvolved:function(){e({orderEventsByGroupsInvolved:"none"===r().orderEventsByGroupsInvolved?"desc":"desc"===r().orderEventsByGroupsInvolved?"asc":(r().orderEventsByGroupsInvolved,"none")}),e({filteredDatabaseByGroups:r().orderSubDatabase(r().filteredDatabaseByGroups)})},orderEventsByData:"none",toggleOrderEventsByData:function(){e({orderEventsByData:"none"===r().orderEventsByData?"desc":"desc"===r().orderEventsByData?"asc":(r().orderEventsByData,"none")}),e({filteredDatabaseByGroups:r().orderSubDatabase(r().filteredDatabaseByGroups)})},orderSubDatabase:function(e){var t=[],n=[],a=r().orderEventsByGroupsInvolved,s=r().orderEventsByData;return"none"===s&&"none"===a&&t.push("data")&&n.push("desc"),"none"!==s&&t.push("data")&&n.push(s),"none"!==a&&t.push((function(e){return(0,o.deburr)(e.label)}))&&n.push(a),(0,o.orderBy)(e,t,n)},orderDatabase:function(e){var t=[],n=[],a=r().orderByDate,s=r().orderByDegreeOfViolence,l=r().orderByEvents,u=r().orderByGroupsInvolved,i=r().orderByType;return"none"===a&&"none"===s&&"none"===l&&"none"===u&&"none"===i&&t.push("date")&&n.push("asc"),"none"!==a&&t.push((function(e){return"none"!==s||"none"!==l||"none"!==u||"none"!==i?d()(e.date).format("YYYY-MM"):e.date}))&&n.push(a),"none"!==s&&t.push((function(e){return e.degreViolence.replace(/.*\(/gim,"")}))&&n.push(s),"none"!==l&&t.push((function(e){return(0,o.deburr)(e.evenement)}))&&n.push(l),"none"!==u&&t.push((function(e){return e.groupeImplique.split("\n").map((function(e){return(0,o.deburr)(e)}))}))&&n.push(u),"none"!==i&&t.push((function(e){return(0,o.deburr)(e.type)}))&&n.push(i),n.length>1&&n.push("asc")&&t.push("_id"),(0,o.orderBy)(e,t,n)}}}(e,r))}))},5669:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/evenementsParGroupe",function(){return t(1256)}])}},function(e){e.O(0,[662,874,754,774,888,179],(function(){return r=5669,e(e.s=r);var r}));var r=e.O();_N_E=r}]);